<!-- Modal Template -->
<ng-template #karupanType let-modal>
  <div class="modal-header">
    <h4 class="modal-title">Add karupanType</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
  </div>

  <form [formGroup]="karupanForm">
  <div class="modal-body">
    <div class="mb-3">
      <label for="form-label">ประเภทครุภัณฑ์</label>
      <input type="text" class="form-control" name="karupanType" formControlName="karupanType"
        placeholder="เช่น ครุภัณฑ์สำนักงาน">
    </div>
    <div class="mb-3">
      <label for="exampleFormControlTextarea1" class="form-label">รายละเอียด</label>
      <textarea class="form-control" name="details" formControlName="details" id="exampleFormControlTextarea1" rows="5"></textarea>
    </div>
    </div>
</form>

  <div class="modal-footer">
    <button class="btn btn-secondary" (click)="modal.dismiss()">ปิด</button>
    <button class="btn btn-success" (click)="summitForm()">บันทึก</button>
  </div>
</ng-template>
<div class="row">
    <div class="col-12 col-md-6 col-xl-4">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Karupan Type</h5>
            <h6 class="card-subtitle mb-2 text-secondary">add karupan type</h6>
            <p class="card-text mb-3">ครุภัณฑ์สำนักงาน ครุภัณฑ์ยานพาหนะและขนส่ง ครุภัณฑ์ไฟฟ้าและวิทยุ ครุภัณฑ์การแพทย์ ครุภัณฑ์การเกษตร และครุภัณฑ์ก่อสร้าง</p>
            <button type="button" class="btn btn-link p-0 card-link" (click)="karupanModal(karupanType)">
              Add
            </button>
            <a href="#" (click)="false" class="card-link">views</a>
          </div>
        </div>
    </div>
</div>




          <div class="row mt-3">
            <div class="col-12 col-md-6 col-xl-4">
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">Upload File</h5>
                  <h6 class="card-subtitle mb-2 text-secondary">Upload a file (image or other)</h6>

                  <input type="file" (change)="onFileSelected($event)" class="form-control" />

                  <div *ngIf="previewUrl" class="mt-2">
                    <p class="mb-1">Preview:</p>
                    <img *ngIf="isImage()" [src]="previewUrl" alt="preview" style="max-width:100%;height:auto;border:1px solid #ddd;padding:4px;" />
                    <p *ngIf="!isImage()" class="small">Selected: {{ selectedFile?.name }}</p>
                  </div>

                  <button class="btn btn-primary mt-3" (click)="upload()" [disabled]="!selectedFile">Upload</button>

                  <div *ngIf="uploadProgress > 0" class="mt-2">Progress: {{ uploadProgress }}%</div>
                  <pre *ngIf="uploadResponse" class="mt-2 small">{{ uploadResponse | json }}</pre>
                </div>
              </div>
            </div>
          </div>
